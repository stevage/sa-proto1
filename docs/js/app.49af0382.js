(function(e){function t(t){for(var i,n,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)n=c[d],r[n]&&p.push(r[n][0]),r[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},r={app:0},o=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("64a9"),r=a.n(i);r.a},"04b3":function(e,t,a){},"0dbc":function(e,t,a){},1:function(e,t){},2:function(e,t){},"2a82":function(e,t,a){"use strict";var i=a("536d"),r=a.n(i);r.a},3:function(e,t){},4:function(e,t){},5:function(e,t){},"536d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),a("div",{attrs:{id:"middle"}},[a("div",{attrs:{id:"sidebar"}},[a("SportSelector"),a("FacilityInfo"),a("LayerSelector")],1),a("div",{attrs:{id:"map-container"}},[a("Map"),a("FeatureInfo"),a("Legend")],1)]),a("div",{attrs:{id:"bottom"}})])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"top"}},[a("h1",[e._v("SportAus Data Platform Prototype #1")])])}],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"map"}})},c=[],s=a("75fc"),l=(a("96cf"),a("3b8d")),u=(a("55dd"),a("e192")),d=a.n(u),p=a("8936"),f=a.n(p),y=a("fb1a"),v=a.n(y),m=a("bc3a"),h=a.n(m),_=(a("ac6d"),a("595b").circle),b=a("595b").voronoi,w=a("6e1d")(-30),g={data:function(){return{facilities:{features:[]},activeSport:void 0}},mounted:function(){d.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJGcW03aExzIn0.QUkUmTGIO3gGt83HiRIjQw";var e=new d.a.Map({container:"map",center:[145,-37.8],zoom:12,style:"mapbox://styles/mapbox/light-v9"});f.a.init(e),window.map=e,window.Map=this,e.on("load",function(){return C(e)})},computed:{similarFacilities:function(){var e=this;return this.facilities.features.filter(function(t){return t.properties.SportsPlayed===e.activeSport&&t!==window.FacilityInfo.facility})}},methods:{toggleLayer:function(e,t){window.map.U.toggle(e,t)},nearestSimilar:function(e){return this.similarFacilities.map(function(t){return t._distance=w.distance(e.geometry.coordinates,t.geometry.coordinates),t}).sort(function(e,t){return e._distance-t._distance}).slice(1,6)},updateTimeCatchment:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:window.map.U.setData("time-catchment",{type:"FeatureCollection",features:[]}),a=window.FacilityInfo.facility.geometry.coordinates,e.next=8;break;case 5:t=e.sent,e.next=12;break;case 8:return e.next=10,h.a.get("https://api.mapbox.com/isochrone/v1/mapbox/driving/".concat(a),{params:{contours_minutes:"10,20,30",access_token:d.a.accessToken,polygons:!0,denoise:1}});case 10:i=e.sent,t=i.data;case 12:window.map.U.setData("time-catchment",t),window.FacilityCounts.isochrone=t;case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),filterBySport:function(e){e?window.map.setFilter("sport-and-rec-point",["==","SportsPlayed",e]):window.map.setFilter("sport-and-rec-point",!0)},filterByNotSport:function(e){window.map.setFilter("sport-and-rec-point",["!in","SportsPlayed"].concat(Object(s["a"])(e)))}}};function S(e,t){window.Map.activeSport=t,e.U.setCircleColor("sport-and-rec-point",{property:"SportsPlayed",type:"categorical",stops:[[t,"hsl(150,100%,70%)"]],default:"green"}),e.U.setCircleRadius("sport-and-rec-point",{property:"SportsPlayed",type:"categorical",stops:[[t,10]],default:5});var a=2;e.U.setData("facility-catchment",{type:"FeatureCollection",features:window.Map.similarFacilities.map(function(e){return _(e.geometry.coordinates,a)})})}function F(e){var t=b({type:"FeatureCollection",features:window.Map.similarFacilities},{bbox:[141,-39,150,-34]});t.features=t.features.filter(Boolean),e.U.setData("facility-voronoi",t)}function A(e,t){window.FacilityInfo.facility=t,console.log(t.properties),e.setFilter("facility-highlight",["==","OBJECTID",t.properties.OBJECTID]),S(e,t.properties.SportsPlayed),F(e),window.FacilityCounts.isochrone=void 0}function C(e){e.U.addGeoJSON("sport-and-rec"),e.U.addCircle("sport-and-rec-point","sport-and-rec",{circleColor:"green",circleStrokeColor:"darkgreen",circleStrokeWidth:1}),e.U.addGeoJSON("facility-catchment"),e.U.addLine("catchments","facility-catchment",{lineColor:"green",lineOpacity:.5,lineDasharray:[2,2],visibility:"none"}),e.U.addCircle("facility-highlight","sport-and-rec",{circleColor:"transparent",circleStrokeColor:"yellow",circleStrokeWidth:3,circleRadius:20,filter:!1}),e.U.addSymbol("sport-and-rec-labels","sport-and-rec",{textField:"{FacilityName}",minzoom:15,textAnchor:"left",textOffset:[.5,0],textColor:"green",textJustify:"left"}),h.a.get("data/sport_and_rec.geojson").then(function(t){window.Map.facilities=t.data,e.U.setData("sport-and-rec",t.data)}),e.U.addGeoJSON("time-catchment"),e.U.addFill("time-catchment","time-catchment",{fillColor:"hsla(240,90%,30%,0.2)"}),e.U.addGeoJSON("facility-voronoi"),e.U.addLine("facilityVoronoi","facility-voronoi",{lineColor:"#333",visibility:"none"}),e.U.addVector("lga","https://vector-tiles.terria.io/FID_LGA_2011_AUST/{z}/{x}/{y}.pbf"),e.U.addLine("lga","lga",{lineColor:"orange",sourceLayer:"FID_LGA_2011_AUST",visibility:"none"}),e.addSource("poa",{type:"vector",tiles:["https://vector-tiles.terria.io/FID_POA_2011_AUST/{z}/{x}/{y}.pbf"],maxzoom:12}),e.U.addLine("poa","poa",{lineColor:"hsla(0,80%,80%,0.5)",lineWidth:{stops:[[12,3],[17,10]]},sourceLayer:"FID_POA_2011_AUST",visibility:"none"});new v.a({tableUrl:"data/dwelling_structure.csv",tableNumericField:"Total selected",tableIdField:"SA4_code_2011",geometryTiles:["https://vector-tiles.terria.io/FID_SA4_2011_AUST/{z}/{x}/{y}.pbf"],geometryIdField:"SA4_CODE11",sourceLayer:"FID_SA4_2011_AUST",binCount:10,colorScheme:"PuBu",legendElement:"#Legend .bar",paint:{"fill-opacity":.3},layout:{visibility:"none"},before:"sport-and-rec-point",layerId:"population"}).addTo(e);e.U.hoverPointer("sport-and-rec-point"),e.on("mouseover","sport-and-rec-point",function(e){window.FeatureInfo.properties=e.features[0].properties}),e.on("mouseout","sport-and-rec-point",function(e){window.FeatureInfo.properties=void 0}),e.on("click","sport-and-rec-point",function(t){A(e,t.features[0])}),window.LayerSelector.population=!1,window.LayerSelector.catchments=!1}var x=g,k=(a("aad6"),a("2877")),I=Object(k["a"])(x,n,c,!1,null,"52fb0d24",null);I.options.__file="Map.vue";var L=I.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.properties?a("div",{attrs:{id:"FeatureInfo"}},[a("table",[a("tr",[a("th",[e._v("Name")]),a("td",[e._v(e._s(e.properties.FacilityName))])]),a("tr",[a("th",[e._v("Sports")]),a("td",[e._v(e._s(e.properties.SportsPlayed))])]),e.properties.NumberFieldCourts?a("tr",[a("th",[e._v("Fields")]),a("td",[e._v(e._s(e.properties.NumberFieldCourts))])]):e._e()])]):e._e()},U=[],T={name:"FeatureInfo",data:function(){return{properties:void 0}},created:function(){window.FeatureInfo=this}},P=T,N=(a("a41a"),Object(k["a"])(P,O,U,!1,null,"61332db0",null));N.options.__file="FeatureInfo.vue";var $=N.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("legend",{attrs:{id:"Legend"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.population,expression:"population"}],staticClass:"population"},[a("h4",[e._v("Population")]),a("div",{staticClass:"bar"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.facilityCatchment,expression:"facilityCatchment"}],staticClass:"facility-catchment"},[a("h4",[e._v("Travel time")]),a("div",{staticClass:"ramp"},[a("div",{staticClass:"value"},[a("div",{staticClass:"box",style:{backgroundColor:"hsla(240,90%,30%,0.6)"}}),a("caption",[e._v("5 minutes")])]),a("div",{staticClass:"value"},[a("div",{staticClass:"box",style:{background:"hsla(240,90%,30%,0.4)"}}),a("caption",[e._v("10 minutes")])]),a("div",{staticClass:"value"},[a("div",{staticClass:"box",style:{background:"hsla(240,90%,30%,0.2)"}}),a("caption",[e._v("15 minutes")])])])])])},M=[],D={name:"Legend",data:function(){return{population:!0,facilityCatchment:!0}},created:function(){window.Legend=this},methods:{toggle:function(e,t){this[e]=t}}},E=D,G=(a("a7e2"),a("2a82"),Object(k["a"])(E,j,M,!1,null,"50e5f656",null));G.options.__file="Legend.vue";var B=G.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"LayerSelector"}},[a("h3",[e._v("Layers")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.layers.population,expression:"layers.population"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.layers.population)?e._i(e.layers.population,null)>-1:e.layers.population},on:{change:function(t){var a=e.layers.population,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(e.layers,"population",a.concat([o])):n>-1&&e.$set(e.layers,"population",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.layers,"population",r)}}}),e._v("Population")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.layers.catchments,expression:"layers.catchments"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.layers.catchments)?e._i(e.layers.catchments,null)>-1:e.layers.catchments},on:{change:function(t){var a=e.layers.catchments,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(e.layers,"catchments",a.concat([o])):n>-1&&e.$set(e.layers,"catchments",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.layers,"catchments",r)}}}),e._v("2km Catchments")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.layers.facilityVoronoi,expression:"layers.facilityVoronoi"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.layers.facilityVoronoi)?e._i(e.layers.facilityVoronoi,null)>-1:e.layers.facilityVoronoi},on:{change:function(t){var a=e.layers.facilityVoronoi,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(e.layers,"facilityVoronoi",a.concat([o])):n>-1&&e.$set(e.layers,"facilityVoronoi",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.layers,"facilityVoronoi",r)}}}),e._v("Facility voronoi polygons")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.layers.lga,expression:"layers.lga"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.layers.lga)?e._i(e.layers.lga,null)>-1:e.layers.lga},on:{change:function(t){var a=e.layers.lga,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(e.layers,"lga",a.concat([o])):n>-1&&e.$set(e.layers,"lga",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.layers,"lga",r)}}}),e._v("Local government areas")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.layers.poa,expression:"layers.poa"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.layers.poa)?e._i(e.layers.poa,null)>-1:e.layers.poa},on:{change:function(t){var a=e.layers.poa,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);i.checked?n<0&&e.$set(e.layers,"poa",a.concat([o])):n>-1&&e.$set(e.layers,"poa",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.layers,"poa",r)}}}),e._v("Postcodes")])])},V=[],J=a("a4bb"),z=a.n(J),q={name:"LayerSelector",data:function(){return{layers:{}}},created:function(){window.LayerSelector=this},watch:{layers:{handler:function(e){for(var t=z()(this.layers),a=0;a<t.length;a++){var i=t[a];window.Legend.toggle(i,this.layers[i]),window.map.isStyleLoaded()&&window.Map.toggleLayer(i,this.layers[i])}},deep:!0}}},W=q,H=(a("739a"),Object(k["a"])(W,R,V,!1,null,"df802c66",null));H.options.__file="LayerSelector.vue";var Q=H.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.facility?a("div",{attrs:{id:"FacilityInfo"}},[a("h3",[e._v(e._s(e.facility.properties.FacilityName))]),a("table",[a("tr",[a("th",[e._v("Sports")]),a("td",[e._v(e._s(e.p.SportsPlayed))])]),a("tr",[a("th",[e._v("Remoteness")]),a("td",[e._v(e._s(e.remotenessArea))])]),a("tr",[a("th",[e._v("LGA")]),a("td",[e._v(e._s(e.lga))])])]),a("Tools")],1):e._e()},Z=[],K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Tools"}},[a("h3",[e._v("Tools")]),a("button",{on:{click:e.showTimeCatchment}},[e._v("Find alternative facilities")]),a("FacilityCounts")],1)},Y=[],ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isochrone?a("div",{attrs:{id:"FacilityCounts"}},[a("h3",[e._v("Alternative "+e._s(e.facility.properties.SportsPlayed)+" facilities")]),a("table",e._l([].concat(e.isochrone.features).sort(function(e,t){return e.properties.contour-t.properties.contour}),function(t){return a("tr",[a("td",{staticClass:"time"},[e._v(e._s(t.properties.contour)+" minutes' drive")]),a("td",{staticClass:"count"},[e._v(e._s(e.facilityCount[t.properties.contour])+" facilities")])])}),0)]):e._e()},te=[],ae=a("5d73"),ie=a.n(ae),re=a("595b"),oe={name:"FacilityCounts",data:function(){return{isochrone:void 0}},created:function(){window.FacilityCounts=this},computed:{facility:function(){return window.FacilityInfo.facility},facilityCount:function(){var e={};if(!this.isochrone)return e;var t=!0,a=!1,i=void 0;try{for(var r,o=function(){var t=r.value;e[t.properties.contour]=window.Map.similarFacilities.filter(function(e){return Object(re["booleanPointInPolygon"])(e,t)}).length},n=ie()(this.isochrone.features);!(t=(r=n.next()).done);t=!0)o()}catch(c){a=!0,i=c}finally{try{t||null==n.return||n.return()}finally{if(a)throw i}}return e}}},ne=oe,ce=(a("f834"),Object(k["a"])(ne,ee,te,!1,null,"16bab74e",null));ce.options.__file="FacilityCounts.vue";var se=ce.exports,le={name:"Tools",components:{FacilityCounts:se},data:function(){return{}},created:function(){window.Tools=this},methods:{showTimeCatchment:function(){window.Map.updateTimeCatchment()}}},ue=le,de=(a("9c1e"),Object(k["a"])(ue,K,Y,!1,null,"07d2ab60",null));de.options.__file="Tools.vue";var pe=de.exports,fe=a("3f94").queryLngLat,ye={name:"FacilityInfo",components:{Tools:pe},data:function(){return{facility:void 0,nearest:[],remotenessArea:void 0,lga:void 0}},created:function(){window.FacilityInfo=this},watch:{facility:function(){var e=this,t=this.facility.geometry.coordinates;fe("https://vector-tiles.terria.io/FID_RA_2011_AUST/{z}/{x}/{y}.pbf",t,11,"FID_RA_2011_AUST").then(function(t){return e.remotenessArea=t.features[0].properties.RA_NAME11}),fe("https://vector-tiles.terria.io/FID_LGA_2011_AUST/{z}/{x}/{y}.pbf",t,11,"FID_LGA_2011_AUST").then(function(t){return e.lga=t.features[0].properties.LGA_NAME11}),this.nearest=window.Map.nearestSimilar(this.facility)}},computed:{p:function(){return this.facility.properties}}},ve=ye,me=(a("8dcc"),Object(k["a"])(ve,X,Z,!1,null,"a8b7ea30",null));me.options.__file="FacilityInfo.vue";var he=me.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"SportSelector"}},[a("h3",[e._v("Sport")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("All sports")]),e._l(e.sports,function(t){return a("option",[e._v(e._s(t))])}),a("option",{attrs:{value:"_other"}},[e._v("Other sports")])],2)])},be=[],we={name:"SportSelector",data:function(){return{selected:"",sports:["Aerobics","Athletics","Australian Rules Football","Australian Rules football","BMX","Badminton","Baseball","Basketball","Cricket","Croquet","Cycling","Equestrian","Fitness / Gymnasium Workouts","Golf","Gymnastics","Hockey","Lawn Bowls","Netball (Indoor)","Netball (indoor)","Netball","Sailing","Shooting Sports","Skating","Soccer (Indoor Soccer / Futsal)","Soccer","Squash / Racquetball","Surf Life Saving","Swimming","Tennis (Outdoor)","Volleyball","soccer"]}},created:function(){window.SportSelector=this},watch:{selected:function(){"_other"===this.selected?window.Map.filterByNotSport(this.sports):window.Map.filterBySport(this.selected)}}},ge=we,Se=Object(k["a"])(ge,_e,be,!1,null,"531c96b3",null);Se.options.__file="SportSelector.vue";var Fe=Se.exports,Ae={name:"app",components:{Map:L,FeatureInfo:$,Legend:B,LayerSelector:Q,FacilityInfo:he,SportSelector:Fe},mounted:function(){}},Ce=Ae,xe=(a("034f"),Object(k["a"])(Ce,r,o,!1,null,null,null));xe.options.__file="App.vue";var ke=xe.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(ke)}}).$mount("#app")},"64a9":function(e,t,a){},"64e5":function(e,t,a){},"739a":function(e,t,a){"use strict";var i=a("fb4d"),r=a.n(i);r.a},"8dcc":function(e,t,a){"use strict";var i=a("c785"),r=a.n(i);r.a},"9c1e":function(e,t,a){"use strict";var i=a("cfc1"),r=a.n(i);r.a},a41a:function(e,t,a){"use strict";var i=a("04b3"),r=a.n(i);r.a},a7e2:function(e,t,a){"use strict";var i=a("dcf0"),r=a.n(i);r.a},aad6:function(e,t,a){"use strict";var i=a("0dbc"),r=a.n(i);r.a},c785:function(e,t,a){},cfc1:function(e,t,a){},dcf0:function(e,t,a){},f834:function(e,t,a){"use strict";var i=a("64e5"),r=a.n(i);r.a},fb4d:function(e,t,a){}});
//# sourceMappingURL=app.49af0382.js.map