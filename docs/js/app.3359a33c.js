(function(t){function e(e){for(var r,a,c=e[0],s=e[1],l=e[2],p=0,d=[];p<c.length;p++)a=c[p],o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},1:function(t,e){},2:function(t,e){},"2a82":function(t,e,n){"use strict";var r=n("536d"),o=n.n(r);o.a},3:function(t,e){},4:function(t,e){},5:function(t,e){},"536d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("div",{attrs:{id:"middle"}},[n("div",{attrs:{id:"sidebar"}},[n("FacilityInfo"),n("LayerSelector")],1),n("div",{attrs:{id:"map-container"}},[n("Map"),n("FeatureInfo"),n("Legend")],1)]),n("div",{attrs:{id:"bottom"}})])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"top"}},[n("h1",[t._v("SportAus Data Platform Prototype #1")])])}],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"map"}})},c=[],s=(n("55dd"),n("e192")),l=n.n(s),u=n("8936"),p=n.n(u),d=n("fb1a"),f=n.n(d),v=n("bc3a"),_=n.n(v),y=(n("2963"),n("ac6d"),n("6e1d")(-30)),m={data:function(){return{facilities:{features:[]}}},mounted:function(){l.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJGcW03aExzIn0.QUkUmTGIO3gGt83HiRIjQw";var t=new l.a.Map({container:"map",center:[145,-37.8],zoom:12,style:"mapbox://styles/mapbox/light-v9"});p.a.init(t),window.map=t,window.Map=this,t.on("load",function(){return b(t)})},methods:{toggleLayer:function(t,e){"population"===t&&window.map.U.toggle("choropleth",e)},nearestSimilar:function(t){return this.facilities.features.filter(function(e){return e.properties.SportsPlayed===t.properties.SportsPlayed}).map(function(e){return e._distance=y.distance(t.geometry.coordinates,e.geometry.coordinates),e}).sort(function(t,e){return t._distance-e._distance}).slice(1,6)}}};function h(t,e){t.U.setCircleColor("sport-and-rec-point",{property:"SportsPlayed",type:"categorical",stops:[[e,"hsl(150,100%,70%)"]],default:"green"}),t.U.setCircleRadius("sport-and-rec-point",{property:"SportsPlayed",type:"categorical",stops:[[e,10]],default:5}),t.setFilter("facility-catchment",["==","SportsPlayed",e])}function b(t){t.U.addGeoJSON("sport-and-rec"),t.U.addCircle("sport-and-rec-point","sport-and-rec",{circleColor:"green",circleStrokeColor:"darkgreen",circleStrokeWidth:1}),t.U.addCircle("facility-catchment","sport-and-rec",{circleColor:"hsla(150,80%,50%,0.2)",circleRadius:100,circleStrokeColor:"darkgreen",circleStrokeWidth:1,filter:!1}),t.U.addSymbol("sport-and-rec-labels","sport-and-rec",{textField:"{FacilityName}",minzoom:15,textAnchor:"left",textOffset:[.5,0],textColor:"green",textJustify:"left"}),t.U.addGeoJSON("vicmap-sport"),_.a.get("data/vicmap_sports.geojson").then(function(e){t.U.setData("vicmap-sport",e.data)}),_.a.get("data/sport_and_rec.geojson").then(function(e){window.Map.facilities=e.data,t.U.setData("sport-and-rec",e.data)});new f.a({tableUrl:"data/dwelling_structure.csv",tableNumericField:"Total selected",tableIdField:"SA4_code_2011",geometryTiles:["https://vector-tiles.terria.io/FID_SA4_2011_AUST/{z}/{x}/{y}.pbf"],geometryIdField:"SA4_CODE11",sourceLayer:"FID_SA4_2011_AUST",binCount:10,colorScheme:"PuBu",legendElement:"#Legend .bar",paint:{"fill-opacity":.3},layout:{visibility:"none"},before:"sport-and-rec-point"}).addTo(t);t.U.hoverPointer("sport-and-rec-point"),t.on("mouseover","sport-and-rec-point",function(t){window.FeatureInfo.properties=t.features[0].properties}),t.on("click","sport-and-rec-point",function(e){window.FacilityInfo.facility=e.features[0],console.log(e.features[0].properties),h(t,e.features[0].properties.SportsPlayed)})}var g=m,w=(n("7e0c"),n("2877")),S=Object(w["a"])(g,a,c,!1,null,"00483f64",null);S.options.__file="Map.vue";var F=S.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"FeatureInfo"}},[n("table",[n("tr",[n("th",[t._v("Name")]),n("td",[t._v(t._s(t.properties.FacilityName))])]),n("tr",[n("th",[t._v("Sports")]),n("td",[t._v(t._s(t.properties.SportsPlayed))])]),t.properties.NumberFieldCourts?n("tr",[n("th",[t._v("Fields")]),n("td",[t._v(t._s(t.properties.NumberFieldCourts))])]):t._e()])])},I=[],x={name:"FeatureInfo",data:function(){return{properties:{}}},created:function(){window.FeatureInfo=this}},L=x,P=(n("797f"),Object(w["a"])(L,A,I,!1,null,"24108778",null));P.options.__file="FeatureInfo.vue";var O=P.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Legend"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.population,expression:"population"}],staticClass:"population"},[n("h4",[t._v("Population")]),n("div",{staticClass:"bar"})])])},j=[],k={name:"Legend",data:function(){return{population:!0}},created:function(){window.Legend=this},methods:{toggle:function(t,e){this.population=!!e}}},C=k,M=(n("eb2a"),n("2a82"),Object(w["a"])(C,U,j,!1,null,"50747bc0",null));M.options.__file="Legend.vue";var N=M.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"LayerSelector"}},[n("h2",[t._v("Layers")]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.population,expression:"population"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.population)?t._i(t.population,null)>-1:t.population},on:{change:function(e){var n=t.population,r=e.target,o=!!r.checked;if(Array.isArray(n)){var i=null,a=t._i(n,i);r.checked?a<0&&(t.population=n.concat([i])):a>-1&&(t.population=n.slice(0,a).concat(n.slice(a+1)))}else t.population=o}}}),t._v("Population")])])},E=[],D={name:"LayerSelector",data:function(){return{population:void 0}},created:function(){window.LayerSelector=this},watch:{population:function(){window.Legend.toggle("population",this.population),window.Map.toggleLayer("population",this.population)}}},G=D,R=Object(w["a"])(G,T,E,!1,null,"7d4fbfd7",null);R.options.__file="LayerSelector.vue";var $=R.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.facility?n("div",{attrs:{id:"FacilityInfo"}},[n("h3",[t._v(t._s(t.facility.properties.FacilityName))]),n("table",[n("tr",[n("th",[t._v("Sports")]),n("td",[t._v(t._s(t.p.SportsPlayed))])]),n("tr",[n("th",[t._v("Remoteness")]),n("td",[t._v(t._s(t.remotenessArea))])]),n("tr",[n("th",[t._v("LGA")]),n("td",[t._v(t._s(t.lga))])])]),n("h4",[t._v("Nearest "+t._s(t.p.SportsPlayed)+" facilities")]),n("table",t._l(t.nearest,function(e){return n("tr",[n("td",{staticClass:"distance"},[t._v(t._s(Math.round(e._distance))+" km")]),n("td",[t._v(t._s(e.properties.FacilityName)+" ")])])}),0)]):t._e()},z=[],W=n("3f94").queryLngLat,Q={name:"FacilityInfo",data:function(){return{facility:void 0,nearest:[],remotenessArea:void 0,lga:void 0}},created:function(){window.FacilityInfo=this},watch:{facility:function(){var t=this,e=this.facility.geometry.coordinates;W("https://vector-tiles.terria.io/FID_RA_2011_AUST/{z}/{x}/{y}.pbf",e,11,"FID_RA_2011_AUST").then(function(e){return t.remotenessArea=e.features[0].properties.RA_NAME11}),W("https://vector-tiles.terria.io/FID_LGA_2011_AUST/{z}/{x}/{y}.pbf",e,11,"FID_LGA_2011_AUST").then(function(e){return t.lga=e.features[0].properties.LGA_NAME11}),this.nearest=window.Map.nearestSimilar(this.facility)}},computed:{p:function(){return this.facility.properties}}},q=Q,B=(n("7b24"),Object(w["a"])(q,J,z,!1,null,"5ee10fbc",null));B.options.__file="FacilityInfo.vue";var H=B.exports,Z={name:"app",components:{Map:F,FeatureInfo:O,Legend:N,LayerSelector:$,FacilityInfo:H},mounted:function(){window.LayerSelector.population=!1}},K=Z,V=(n("034f"),Object(w["a"])(K,o,i,!1,null,null,null));V.options.__file="App.vue";var X=V.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(X)}}).$mount("#app")},"64a9":function(t,e,n){},"797f":function(t,e,n){"use strict";var r=n("de51"),o=n.n(r);o.a},"7b24":function(t,e,n){"use strict";var r=n("9c2d"),o=n.n(r);o.a},"7e0c":function(t,e,n){"use strict";var r=n("bb04"),o=n.n(r);o.a},"9c2d":function(t,e,n){},bb04:function(t,e,n){},de51:function(t,e,n){},eb2a:function(t,e,n){"use strict";var r=n("f5cb"),o=n.n(r);o.a},f5cb:function(t,e,n){}});
//# sourceMappingURL=app.3359a33c.js.map